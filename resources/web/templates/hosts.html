{% extends "base.html" %}

{% block content %}

  <div class="row-fluid">
    <div class="span12"><h1>Manage Hostnames</h1></div>
  </div>
  
  <div class="row-fluid">
    <div class="box">
      <div class="span12"><h3><i class="icon-tag"></i> Add new hostname</h3></div>
      <div class="row-fluid">
        <div class="span6">
          <p class="j">
            Use the from on the right to specify hostnames that you want to 
            update dynamically. You can add up to {{config.dns.max_hosts}}
            independent hostnames with a maximum length of 255 characters each.
            Only alphanummeric characters are allowed.
          </p>
          
          {% if suffixes|count > 1 %}
            <p class="j">
              From the dropdown menu, you can choose from a list of available 
              suffixes for your DNS name. 
            </p>
          {% endif %}
          
          <p class="j">
            If you specify an initial IP address, your hostname will instantly
            be available. If you leave the IP address blank, you have to
            update it using your homerouter or the ddclient program.
          </p>
        </div>
        
        {% if suffixes %}
          <div class="span6">
            <form class="form-horizontal" action="/user/hosts/add" method="post">
              <div class="control-group">
                <label class="control-label" for="inputHostname">Hostname</label>
                <div class="controls">
                  <div class="input-prepend">
                    <span class="add-on"><i class="icon-th-large"></i></span>
                    <input type="text" id="inputHostname" placeholder="Hostname" name="hostname" required="required">
                  </div>
                </div>
              </div>
            
    
              {% if suffixes|count > 1 %}
                <div class="control-group">
                  <label class="control-label" for="inputSuffix">Suffix</label>
                    <div class="controls">
                      <div class="input-prepend">
                        <span class="add-on"><i class="icon-th-large"></i></span>
                        <select name="suffix">
                          {% for suffix in suffixes %}
                            <option value="{{suffix.id}}">{{suffix.name}}</option>
                          {% endfor %}
                        </select>
                      </div>
                    </div>
                </div>
              {% else %}
                <input type="hidden" name="suffix" value="{{suffixes[0].id}}">
              {% endif %}
              
              
                  
              
              <div class="control-group">
                <label class="control-label" for="inputAddress">Initial Address<br><span>(optional)</span></label>
                <div class="controls">
                  <div class="input-prepend">
                    <span class="add-on"><i class="icon-th-large"></i></span>
                    <input type="text" id="inputAddress" placeholder="Initial address" name="address">
                  </div>
                </div>
              </div>
              <div class="control-group">
                <div class="controls">
                  <button type="submit" class="btn btn-success btn-primary">Add hostname</button>
                  <button type="reset" class="btn">Cancel</button>
                </div>
              </div>
            </form>
          </div>
        {% else %}
          <div class="span6">
          <p class="j text-error">
            There are no suffixes configured yet. Please try again later.
            </p>
          </div>
        {% endif %}
      </div>
    </div>

    {% if hosts %}
      <div class="box">
        <h3><i class="icon-tag"></i> Your Hostnames</h3>
        <table class="table table-bordered table-striped table-hover">
          <tr>
            <th>Hostname</th>
            <th width="20%">Address</th>
            <th width="160px">Updated</th>
            <th width="100px">Actions</th>
          </tr>
          {% for host in hosts %}
            <tr>
              <td>{{host.hostname}}<span class="origin">.{{host.suffix}}</span></td>
              
              <td>
                {% if host.address %}
                  {{host.address}}
                {% else %}
                  <span class="muted">-</span>
                {% endif %}
              </td>
              
              <td>{{host.updated}}</td>
              
              <td>
                <form action="/user/hosts/delete" method="post">
                  <input type="hidden" name="host_id" value="{{host.id}}">
                  <input type="submit" class="btn btn-danger" value="Delete">
                </form>
              </td>
            </tr>
          {% endfor %}
        </table>
      </div>
    {% endif %}
    
  </div>
{% endblock %}